<?php

namespace MavenShop\Core;

use MavenShop\Core\Domain\Product;
    MavenShop\Core\Mappers\ProductMapper;

class WpSearchManager implements iSearchManager{

	public function __construct() {
		;
	}

	/**
	 * 
	 * @param \MavenShop\Core\Domain\ProductFilter $filter
	 * @return \MavenShop\Core\Domain\Product[]
	 */
	public function getProducts( \MavenShop\Core\Domain\ProductFilter $filter ){
		
		$wpSearchMapper = new Mappers\WpSearchMapper;
		$eventManager = new ProductManager();
		
		$events = array( );

		$wpProducts = $wpSearchMapper->getProducts( $filter );
				
		if ( $wpProducts ) {
			foreach ( $wpProducts as $wpProduct ) {
				$events[] = $eventManager->getProductFromPost( $wpProduct );
			}
		}

		return $events;
		
	}
	 


}

